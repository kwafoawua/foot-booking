

<button mat-flat-button (click)="shuffleMatches()">Asignar Octavos</button>
<ng-container *ngIf="tournamentState !== 'Nuevo' else shuffleIt">
  <div class="mt-2" *ngIf="esSinAsignar">
    <p>⚽ Los equipos de octavos de final serán asignados aleatoriamente cuando se completen las inscripciones.</p>
    <p>⚽ Puedes ir cargando las reservas de las canchas para los partidos interactuando con el fixture presentado abajo. Los resultados de los partidos sólo podrás cargalos en el día en que se disputen y automáticamente irán avanzando los equipos ganadores.</p>
    <p>⚽ Recordá que en caso de empate más allá de como decidan resolver el partido (penales, tiempo extra o gol de oro) se deberá cargar el resultado final de la resolución para que el sistema pueda dar avance a uno de los equipos.</p>
    <div *ngIf="inscriptions.length > 0">
      <button mat-flat-button (click)="shuffleMatches()">Asignar Octavos</button>
    </div>
    <div *ngIf="inscriptions.length <= 15">
      <button mat-flat-button (click)="shuffleMatches()" [disabled]="true">Asignar Octavos</button>
      <span style="margin-left: 10px">Se necesitan 16 equipos inscriptos</span>
    </div>
  </div>

  <div class="row mt-2" *ngIf="tournamentState === 'Completo'">
    <div class="col-12 col-md-8">
      <div class="alert alert-info alert-dismissible fade show" role="alert">
        <span [ngStyle]="{fontSize: '12px'}">
          Te informamos que para iniciar el campeonato necesitas cargar cancha, fecha y horario para los primeros 8 partidos.
        </span>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    </div>
    <div class="col-md-1"></div>
    <div class="col-12 col-md-2">
      <button
        mat-flat-button
        color="primary"
        (click)="setCampeonatoState('Iniciado')"
        [disabled]="!sePuedeIniciarCampeonato"
      >
        Iniciar Campeonato
      </button>
    </div>
  </div>

  <div class="row mt-2" *ngIf="tournamentState === 'Iniciado'">
    <div class="col-md-9"></div>
    <div class="col-md-2">
      <button
        mat-flat-button
        color="primary"
        (click)="setCampeonatoState('Finalizado')"
        [disabled]="!sePuedeFinalizarCampeonato"
      >
        Finalizar Campeonato
      </button>
    </div>
  </div>

  <div class="row mt-2 justify-content-center" *ngIf="tournamentState === 'Finalizado'">
    <app-winner-card-campeonato
      class="w-100 border-success full-shadow"
      [primerPremio]="tournament?.prize1"
      [segundoPremio]="tournament?.prize2"
      [tercerPremio]="tournament?.prize3"
      [primerEquipo]="primerEquipo"
      [segundoEquipo]="segundoEquipo"
      [tercerEquipo]="tercerEquipo"
      [status]="tournamentState"
    ></app-winner-card-campeonato>
  </div>



  <ngtt-single-elimination-tree *ngIf="myTournamentData"
    [tournament]="myTournamentData"
    [matchTemplate]="myMatchTemplate">
  </ngtt-single-elimination-tree>
</ng-container>


  <ng-template #myMatchTemplate let-match>
    <app-match
      [teams]="inscriptions"
      [match]="match"
      [fields]="fields"
      [isCampeonato]="tournamentState !== 'Finalizado'"
      [maxDate]="maxDate"
      [minDate]="minDate"
      (updateMatch)="updateMatch($event)"
    ></app-match>
  </ng-template>


<ng-template #shuffleIt>
  <p>⚽ Los equipos de octavos de final serán asignados aleatoriamente cuando se completen las inscripciones.</p>
  <p>⚽ Puedes ir cargando las reservas de las canchas para los partidos interactuando con el fixture presentado abajo. Los resultados de los partidos sólo podrás cargalos en el día en que se disputen y automáticamente irán avanzando los equipos ganadores.</p>
  <p>⚽ Recordá que en caso de empate más allá de como decidan resolver el partido (penales, tiempo extra o gol de oro) se deberá cargar el resultado final de la resolución para que el sistema pueda dar avance a uno de los equipos.</p>
  <button mat-button (click)="shuffleMatches()" [disabled]="!isGenerable">Asignar Octavos</button>
  <span *ngIf="!isGenerable">Se necesitan 16 equipos inscriptos</span>
</ng-template>
